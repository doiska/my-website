---
export const prerender = false;
const isRegistered = Astro.url.searchParams.has("registered");
const isError = Astro.url.searchParams.has("error");
---

<div class="space-y-4 bg-[#121212] p-6 w-full rounded-lg my-4">
    <p class="text-foreground">Join my newsletter to stay updated about the latest things I've created and discover the
        great finds I've come across on the internet.</p>
    <p class="font-bold">No spam, opt-out whenever you want.</p>

    <form
            id="nw-form"
            method="POST"
            class="flex gap-2"
            action="/newsletter"
    >
        <input
                required
                placeholder="Your best e-mail"
                name="email"
                type="email"
                class="bg-[#232225] text-neutral-400 w-full rounded-lg px-2 placeholder:text-sm"
        />
        <button
                type="submit"
                class="bg-foreground text-background px-4 py-2 rounded-lg text-sm"
        >
            Subscribe
        </button>
    </form>

  {isRegistered && (
          <p class="bg-green-900/30 border border-green-500/20 p-4 rounded-lg">
              Welcome! You're now subscribed to my newsletter.
          </p>
  )}
  {isError && <p class="text-foreground">Something went wrong. Please try again.</p>}

    <p>
        Get in touch with me on <a target="_blank" class="text-blue-500" href="https://twitter.com/two2kei">X (formerly Twitter)</a> or <a target="_blank" class="text-blue-500" href="mailto:doiska@proton.me">doiska@proton.me</a>.
    </p>
</div>
